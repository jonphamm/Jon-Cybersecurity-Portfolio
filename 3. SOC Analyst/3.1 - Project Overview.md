# Bypassing Defenses and Detecting Attacks: Cybersecurity Lab with Windows VM, Sysmon, LimaCharlie, and Sliver
In this repo, I walk through a comprehensive cybersecurity lab project where I simulate a real-world adversarial scenario using a Windows virtual machine (VM) as the target and an Ubuntu VM as the attacker platform. This hands-on exercise demonstrates how attackers disable system defenses, establish persistent access, and how defenders can detect and respond using custom detection rules.

## Phase 1: Weakening the Target ‚Äì Disabling Windows VM Defenses
The lab begins with simulating an attacker‚Äôs first move: removing built-in Windows security controls to reduce resistance.

‚úÖ Steps Taken:
1. Turned off Virus & Threat Protection: Using the Windows Security GUI, all real-time protection features were disabled.

2. Modified Group Policy Settings: Used the Group Policy Editor to enforce changes that disable key Defender components.

3. Disabled Power Configurations: Sleep, hibernation, and monitor timeout settings were set to 0 using powercfg commands to keep the system continuously available.

4. Enabled Safe Boot: Configured via msconfig to force the system into minimal boot mode for tamper-resistant persistence.

5. Edited the Windows Registry: Manually set critical Windows Defender-related services to a disabled startup state (Start = 4) including:
  a) Sense
  b) WdBoot 
  c) WinDefend
  d) WdNisDrv 
  e) WdNisSvc
  f) WdFilter

These changes render the system defenseless, mimicking a compromised endpoint in the wild.

## Phase 2: Installing Sysmon & LimaCharlie for Visibility
With defenses removed, I then shifted to simulating how a security team might regain visibility using telemetry.

üß∞ Tooling Deployed:
Sysmon: Captures rich event logs including process creation, network connections, driver loads, and more. It's the cornerstone for endpoint telemetry.

LimaCharlie: A cloud-native security operations platform used to ingest Sysmon logs and build custom detection rules.

üõ† Setup Process:
Installed Sysmon with a recommended config (e.g., SwiftOnSecurity).

Installed the LimaCharlie agent on the Windows VM.

Created an organization in LimaCharlie and configured the agent to ingest Sysmon logs.

Now the Windows VM, though defenseless, is under active observation‚Äîideal for detection engineering.

## Phase 3: Simulating Attacker Behavior Using Sliver C2
To emulate a real-world adversary, I used the Sliver C2 Framework on an Ubuntu VM.

üìå Attacker Setup:
Gathered network information from the Ubuntu VM.

Edited /etc/netplan/00-installer-config.yaml to set static network values.

SSH‚Äôd into the Ubuntu box, downloaded, and installed Sliver.

Launched the Sliver C2 server and generated a Windows payload.

The payload was then pulled onto the Windows VM and executed, giving Sliver interactive access‚Äîjust like a real command-and-control session.

## Phase 4: Detection and Response with LimaCharlie
With the attack in progress, I moved to the defensive side using LimaCharlie to detect and respond.

üëÅ What I Observed:
Sysmon telemetry from the infected Windows VM flowed into LimaCharlie.

LimaCharlie highlighted suspicious behaviors, such as new network connections and unknown process trees.

üß† Detection Engineering:
Checked VirusTotal for malware signatures directly through LimaCharlie.

Created a custom detection rule to flag specific command-line behaviors and process anomalies.

Saw the rule trigger successfully in response to Sliver activity.

Configured a custom webhook output (not covered in the blog video, but added manually) to push notifications to external services for alerting and automation.

## Learning Outcomes
This lab provided a full-circle view of both offensive and defensive operations in cybersecurity:

Offensive Skills	Defensive Skills
Windows hardening evasion	Sysmon deployment and configuration
Registry and service tampering	Threat hunting via LimaCharlie
C2 installation (Sliver)	Detection engineering
Payload delivery	Alert automation via webhook

By simulating a breach and then detecting it, I gained a clear view of how attackers operate‚Äîand how defenders can detect and respond using telemetry, rules, and automation.
