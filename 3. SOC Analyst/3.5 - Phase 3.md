# Phase 3: Simulating Attacker Behavior Using Sliver C2

## A) Setting Up Sliver C2 Framework on Ubuntu VM

**Sliver** is a powerful **command and control (C2)** framework designed to provide advanced capabilities for controlling remote systems. It is open-source and can be used for security testing, and unfortunately, by bad actors as well.

> [!NOTE]
> With **Sliver**, security professionals, red teams, and penetration testers can easily establish a secure and reliable communication channel over Mutual TLS, HTTP(S), DNS, or Wireguard with target machines.

### On the Ubuntu VM:

1. Log in with the credentials you set up for your Ubuntu VM.

2. Switch to a **root** command prompt:
   
  ````
  sudo su
  ````
3. We need to ensure the IP address of the Ubuntu VM does not change.
   
   - Find the **ens33** - **inet IP** with the following command:
     
     ````
     ip a
     ````

4. Find the gateway IP address of the VM with the following command:

````
ping _gateway -c 1
````
![image](https://github.com/user-attachments/assets/94fba417-0f86-4ead-9d13-0065ef18bf19)

> [!IMPORTANT]
> Take note of the **Ubuntu VM's IP** and **gateway IP** as you will need it again throughout this project.

</br>

5. Edit the configuration file for the network manager "netplan" with the following command:

````
sudo nano /etc/netplan/00-installer-config.yaml
````

</br>

6. The **GNU nano** page will populate and we will be reconfiguring our adapter from DHCP to a statically assigned IP address:

   - Be sure to adjust the "**xxx**" values to your Ubuntu VM's IP address.
   - Once done, press "**Ctrl + X**" to **Exit** and **Save the buffer**.
   - File Name to Write: **/etc/netplan/00-installer-config.yaml**
   - Press **Enter**.
  
![image](https://github.com/user-attachments/assets/3a1e9ccb-a6de-45d8-a180-aa1144b9a23e)

</br>

7. Test the new configuration for errors with the following command:

````
sudo netplan try
````

> [!NOTE]
> You can ignore the warning signs about the **deprecated gateway4**.

</br>

8. If there are no errors, apply the configuration:

````
sudo netplan apply
````

</br>

9. Perform a quick connectivity check by pinging the Google DNS:

````
ping 8.8.8.8
````

> [!NOTE]
> We should now have a **statically assigned IP address** that will not change.

</br>

10. Next, we will **SSH** into the Ubuntu VM from your host system to make command line interface (CLI) actions easier.
    
      - Open a command prompt on your host machine and run the command:

      </br>

     ````
     ssh user@xxx.xxx.xxx.xxx
     ````
      - Be sure to adjust the "**xxx**" values to your Ubuntu VM's specific IP addresses.
      - When prompted, type in "**yes**".


![image](https://github.com/user-attachments/assets/b7f5b710-0272-47a8-9867-efe44afc6eed)

</br>

11. From within this new SSH session, proceed with the following instructions to set up our attack **command-and-control (C2) server**.

      - Start with a root shell:

     </br>

     ````
     sudo su
     ````
   
12. Run the following command to download **Sliver**:

    ````
    wget https://github.com/BishopFox/sliver/releases/download/v1.5.34/sliver-server_linux -O /usr/local/bin/sliver-server
    ````

    
